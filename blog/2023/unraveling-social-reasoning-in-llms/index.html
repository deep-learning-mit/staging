<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Unraveling Social Reasoning in LLMs: A Deep Dive into the Social IQA Benchmark | 6.S898 Deep Learning Blogs 2023</title> <meta name="author" content="abc b c"/> <meta name="description" content="In this study, we investigate the challenge of social commonsense reasoning in large language models (LLMs), aiming to understand and categorize common errors LLMs make in social commonsense reasoning tasks."/> <meta name="keywords" content="machine-learning, ml, deep-learning, reinforcement-learning, iclr"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"/> <link rel="stylesheet" href="/staging/assets/css/main.css"> <link rel="canonical" href="https://deep-learning-mit.github.io/staging/blog/2023/unraveling-social-reasoning-in-llms/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/staging/assets/js/theme.js"></script> <script src="/staging/assets/js/dark_mode.js"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/staging/assets/js/distillpub/template.v2.js"></script> <script src="/staging/assets/js/distillpub/transforms.v2.js"></script> <script src="/staging/assets/js/distillpub/overrides.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <d-front-matter> <script async type="text/json">{
      "title": "Unraveling Social Reasoning in LLMs: A Deep Dive into the Social IQA Benchmark",
      "description": "In this study, we investigate the challenge of social commonsense reasoning in large language models (LLMs), aiming to understand and categorize common errors LLMs make in social commonsense reasoning tasks.",
      "published": "November 11, 2023",
      "authors": [
        {
          "author": "Nina Lei",
          "authorURL": "",
          "affiliations": [
            {
              "name": "Harvard College",
              "url": ""
            }
          ]
        },
        {
          "author": "Andrew Zhao",
          "authorURL": "",
          "affiliations": [
            {
              "name": "Harvard College",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script> </d-front-matter> <body class="fixed-top-nav"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/staging/">6.S898 Deep Learning Blogs 2023</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/staging/blog/index.html">blog</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">past iterations</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="https://iclr-blog-track.github.io/home/">2022</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="post distill"> <d-title> <h1>Unraveling Social Reasoning in LLMs: A Deep Dive into the Social IQA Benchmark</h1> <p>In this study, we investigate the challenge of social commonsense reasoning in large language models (LLMs), aiming to understand and categorize common errors LLMs make in social commonsense reasoning tasks.</p> </d-title> <d-byline></d-byline> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <div><a href="#introduction">Introduction</a></div> <div><a href="#background-and-related-works">Background and Related Works</a></div> <ul> <li><a href="#llms-and-reasoning">LLMs and Reasoning</a></li> <li><a href="#comprehensive-overview-of-benchmarks">Comprehensive Overview of Benchmarks</a></li> <li><a href="#problems-with-social-iqa">Problems With Social IQA</a></li> <li><a href="#prior-error-analysis">Prior Error Analysis</a></li> <li><a href="#conducting-systematic-error-analysis">Conducting Systematic Error Analysis</a></li> <li><a href="#improving-social-reasoning">Improving Social Reasoning</a></li> </ul><div><a href="#methodology">Methodology</a></div> <ul> <li><a href="#step-1-applying-flan-t5-to-social-iqa">Step 1: Applying Flan-T5 to Social IQA</a></li> <li><a href="#step-2-qualitative-coding-of-350-errors">Step 2: Qualitative Coding of 350 Errors</a></li> <li><a href="#step-3-quantitative-error-analysis">Step 3: Quantitative Error Analysis</a></li> <li><a href="#step-4-addressing-type-1-errors">Step 4: Addressing Type 1 Errors</a></li> <li><a href="#step-5-addressing-type-2-errors">Step 5: Addressing Type 2 Errors</a></li> </ul><div><a href="#analysis-and-evaluations">Analysis and Evaluations</a></div> <ul> <li><a href="#general-accuracy-of-flan-t5">General Accuracy of Flan-T5</a></li> <li><a href="#qualitative-coding">Qualitative Coding</a></li> <li><a href="#type-1-errors">Type 1 Errors</a></li> <li><a href="#type-2-errors">Type 2 Errors</a></li> <li><a href="#distribution-of-tags">Distribution of Tags</a></li> <li><a href="#analysis-of-question-types">Analysis of Question Types</a></li> <li><a href="#attempt-to-prune-social-iqa">Attempt to Prune Social IQA</a></li> </ul><div><a href="#discussion">Discussion</a></div> <div><a href="#main-limitations">Main Limitations</a></div> <div><a href="#references">References</a></div> </nav> </d-contents> <h1 id="unraveling-social-reasoning-in-llms-a-decision-tree-framework-for-error-categorization">Unraveling Social Reasoning in LLMs: A Decision Tree Framework for Error Categorization</h1> <h2 id="introduction">Introduction</h2> <p>Social commonsense reasoning is a skill most people acquire within the first few years of life, often without formal education. Consider this example of a social commonsense reasoning question:</p> <p>Q: Kai was frantically running to a gate at the airport. Why was Kai running?</p> <p>A) They were trying to catch a flight that departs soon</p> <p>B) They were training for a marathon</p> <p>C) They were testing out their new running shoe</p> <p>Most would likely infer that Kai was rushing to catch a flight that would depart soon and choose A, the correct answer. Social commonsense reasoning, at its core, entails reasoning about the past, current, and future states of others.</p> <p>Despite advancements in Large Language Models (LLMs), prompting models to achieve near-human levels of performance in different tasks across various domains, they have traditionally struggled with social commonsense reasoning tasks, often underperforming humans. Though, this isn’t surprising to most observers <d-cite key="sap_neural_2023"></d-cite>.</p> <p>To better understand why, previous studies have created benchmarks for social commonsense reasoning <d-cite key="huang_towards_2023"></d-cite>; benchmarked how different models perform on various social commonsense reasoning benchmarks; and/or provided classifications for different question types testing social commonsense reasoning <d-cite key="huang_towards_2023"></d-cite>. Certain question categories, like those directly related to social norms, are documented to exhibit higher error rates, suggesting that some aspects of social reasoning are more challenging for models to learn <d-cite key="li_systematic_2022"></d-cite>. However, these works used older models that were not specifically designed for reasoning tasks.</p> <p>Specifically, our blog investigates the question, <strong>What are underlying themes in social errors that large language models make?</strong> From both a qualitative and quantitative perspective. The goal of our findings is to help discover if there are methods that could potentially address these errors.</p> <p>To answer this question, we ran Flan-T5 on the Social IQA benchmark, which was introduced in 2019 and features 38,000 multiple-choice questions (MCQs) designed to gauge “emotional and social intelligence in everyday situations” <d-cite key="sap_socialiqa_2019"></d-cite>. After qualitatively labeling 350 model errors, we made a striking discovery: over half of the questions Flan-T5 got wrong were due to problematic questions in the Social IQA dataset.</p> <p>Upon making this curious realization, we pivoted our project from designing a decision tree abstraction for providing detailed categorization of social commonsense questions to analyzing and addressing the two types of errors:</p> <p>Type 1: Errors stemming from the flawed construction of the Social IQA dataset</p> <p>Type 2: Errors where Flan-T5’s choices don’t align with social commonsense.</p> <p>In the first error group, even reasonable humans, including this blog post’s authors, disagreed with Social IQA’s “correct” answers. Questions in this first group have nonsensical contexts/questions, lack a single reasonable answer, or have many reasonable answers.</p> <p>When examining questions in the second error group, we noticed that Flan-T5 often over-infers underlying reasons when a more straightforward answer exists. To address this group of errors, we visualized T5’s attention mechanisms when processing such questions.</p> <h2 id="background-and-related-works"><strong>Background and Related Works</strong></h2> <p><strong>LLMs and Reasoning</strong></p> <p>Language models like GPT-4 have captured widespread media attention, given their question-answering capabilities.</p> <p>Throughout the development and testing of LLMs, various tasks have been developed to empirically assess these models’ abilities and limitations. In literature, these tasks are typically categorized into two main groups: natural language understanding (NLU) and natural language generation (NLG). NLU tasks evaluate a language model’s ability to understand natural language. This includes tasks like Natural Language Inference, Reading Comprehension, and various reasoning tasks, including social commonsense reasoning <d-cite key="naveed_comprehensive_2023"></d-cite>.</p> <h3 id="comprehensive-overview-of-social-commonsense-reasoning-benchmarks"><strong>Comprehensive Overview of Social Commonsense Reasoning Benchmarks</strong></h3> <p>Over 100 large-scale benchmarks have been proposed to assess and compare models’ social commonsense reasoning abilities and to serve as resources for transfer learning <d-cite key="davis_benchmarks_2023"></d-cite>. In general, these benchmarks aim to evaluate models’ abilities to infer the mental states, beliefs, and intentions of others. Their development was inspired by the Theory of Mind (ToM), a concept originating from childhood development psychology—some benchmark questions are, in fact, explicitly based on ToM tasks used to assess children’s social reasoning <d-cite key="nematzadeh_evaluating_2018"></d-cite>.</p> <p>Notable benchmarks frequently mentioned in the literature include multiple-choice Question Answering (QA) benchmarks like the 2019 Social IQA <d-cite key="sap_socialiqa_2019"></d-cite> and 2019 HellaSwag <d-cite key="zellers_hellaswag_2019"></d-cite>, along with generative evaluation benchmarks like 2020 ProtoQA <d-cite key="boratko_protoqa_2020"></d-cite>. Many of these benchmarks are based on structured knowledge banks about everyday commonsense reasoning like ATOMIC <d-cite key="sap_atomic_2019"></d-cite> and COMET <d-cite key="bosselut_comet_2019"></d-cite>.</p> <p>Similar to that of other studies evaluating LLMs’ commonsense knowledge, we use an MCQ benchmark and not a generative one because they are more simple and reliable for evaluation <d-cite key="li_systematic_2022"></d-cite>; under tight time and resource constraints, we err on the side of a simple and reliable evaluation method, though, in future works, we would like to generalize our findings to more datasets.</p> <p>However, despite their widespread use, benchmarking datasets like Social IQA are not without flaws. Previous studies have shown that many aspects of common sense are still untested by these benchmarks, indicating an ongoing need for reliable methods to evaluate social commonsense reasoning <d-cite key="davis_commonsense_2015"></d-cite></p> <h3 id="problems-with-social-iqa"><strong>Problems With Social IQA</strong></h3> <p>Social IQA focuses on evaluating models’ abilities to reason about others’ mental states, aligning with Theory of Mind concepts <d-cite key="gandhi_understanding_2023"></d-cite>. Each question in Social IQA comprises a context, a question, and three answer choices; for each of the 37,588 multiple-choice questions, the context, question, correct answer choice, and two incorrect answer choices were gathered through three phases of crowdsourcing on Amazon Mechanical Turk (MTurk) <d-cite key="sap_socialiqa_2019"></d-cite>.</p> <p>In the first two phase, MTurk crowdsource workers sourced context sentences and questions using the ATOMIC knowledge base <d-cite key="sap_atomic_2019"></d-cite>. In the third phase, MTurk workers generated correct answers for the given context-question pairs. Incorrect choices for each question were derived from correct answers to related questions <d-cite key="sap_socialiqa_2019"></d-cite>. In our Discussion section, we will discuss issues with this methodology for sourcing negative answers.</p> <p>Many critiques have been raised about the reliance on crowdsourcing for benchmarks, specifically, about the challenges in obtaining high-quality material <d-cite key="davis_commonsense_2015"></d-cite>. Given the low pay on MTurk, workers often prioritize quantity over quality, leading to errors. There have even been reported instances of crowdsourcing workers using bots to help them complete more tasks.</p> <h3 id="prior-error-analysis-work-using-social-iqa-dataset"><strong>Prior Error Analysis Work Using Social IQA Dataset</strong></h3> <p>The authors of Social IQA conducted a preliminary error analysis of their dataset, finding that language models found questions about context pre-conditions, such as motivations and prior actions, to be much easier than those about stative attributes or predicting future actions. Interpreting these results, the authors hypothesized that models might be learning lexical associations rather than true meaning <d-cite key="sap_socialiqa_2019"></d-cite>. This aligns with findings presented in other works <d-cite key="zellers_hellaswag_2019"></d-cite>.</p> <p>Other research, such as Wang et al.’s <d-cite key="wang_semantic_2021"></d-cite>, categorize Social IQA questions into four types: 1) Feelings and Characteristics, 2) Interaction, 3) Daily Events, and 4) Knowledge, Norm, and Rules. They found the final category to be the most challenging for models.</p> <h3 id="general-methodology-for-conducting-systematic-error-analysis-for-qa"><strong>General Methodology for Conducting Systematic Error Analysis for QA</strong></h3> <p>Our research, aimed at identifying themes in social errors made by LLMs, draws inspiration from conventional methodologies for system error analysis in QA tasks. Moldovan et al.’s data-driven approach to QA error analysis, focusing on answer accuracy based on question stems, reveals that certain question types are more challenging for LLMs <d-cite key="moldovan_performance_2003"></d-cite>. Rondeau et al. used feature extraction for systematic error analysis in the Stanford Question Answering Dataset (SQuAD), employing feature extractors and classifiers <d-cite key="rondeau_systematic_2018"></d-cite>.</p> <h3 id="existing-approaches-to-improve-social-commonsense-reasoning"><strong>Existing Approaches to Improve Social Commonsense Reasoning</strong></h3> <p>Our research also explores existing literature offering solutions for mitigating errors in social commonsense reasoning. Some of these works suggest incorporating external structured data, such as knowledge graphs, into models. For example, Chang et al. showed that integrating knowledge graphs like ConceptNet improves performance on Social IQA <d-cite key="chang_incorporating_2020"></d-cite>.</p> <p>However, despite confirming the effectiveness of this approach, studies like Mitra et al. also noted instances where models, even with access to relevant information that can directly lead to the correct answer, predicted incorrect answers based on irrelevant knowledge <d-cite key="mitra_how_2020"></d-cite>.</p> <h2 id="methodology"><strong>Methodology</strong></h2> <h3 id="step-1-applying-flan-t5-to-social-iqa"><strong>Step 1: Applying Flan-T5 to Social IQA</strong></h3> <p>We first prompted Flan-T5, known for its promising reasoning task performance <d-cite key="chung_scaling_2022"></d-cite>, to answer 33,411 MCQs from the Social IQA dataset. The prompt format, emulating the examples <d-cite key="bosma_introducing_2021"></d-cite> was as follows:</p> <p>[Context].</p> <p>Based on the context above, choose the best answer to the question:</p> <p>[Question]</p> <p>OPTIONS:</p> <p>(A) [Answer A]</p> <p>(B) [Answer B]</p> <p>(C) [Answer C]</p> <p>For your answer, return exactly one character, either A, B, or C.</p> <h3 id="step-2-qualitative-coding-of-350-errors"><strong>Step 2: Qualitative Coding of 350 Errors</strong></h3> <p>Next, we used the following procedure, based on standard iterative qualitative coding methods, to categorize instances where Flan-T5’s response differed from the Social IQA dataset’s correct answer.</p> <ol> <li> <p>Initial Annotation: initially, for a subset of 100 rows, two independent coders annotated each row, noting the reasons for the discrepancy in the correct answer choice between the dataset and Flan-T5.</p> </li> <li> <p>Theme Identification: the coders reviewed each other’s annotations and engaged in discussions to identify major themes in inconsistencies. Based on these discussions, they developed a formal set of tags to apply to the rows.</p> </li> <li> <p>Tagging: finally, they applied these tags to a total of 350 rows</p> </li> </ol> <h3 id="step-3-quantitative-error-analysis"><strong>Step 3: Quantitative Error Analysis</strong></h3> <p>We then analyzed the data to determine the frequency of each error type within our tagged dataset (n=350). We explored potential features, such as specific words, that contributed to the difficulty of the questions.</p> <h3 id="step-4-addressing-type-1-errors---developing-a-pruning-tool"><strong>Step 4: Addressing Type 1 Errors - Developing a Pruning Tool</strong></h3> <p>Our objective here was to develop a tool that could use our tagged question set to accurately identify problematic questions. Unfortunately, this approach did not yield the desired results and needs future work.</p> <h3 id="step-5-addressing-type-2-errors---analyzing-through-attention-mechanism-visualization"><strong>Step 5: Addressing Type 2 Errors - Analyzing through Attention Mechanism Visualization</strong></h3> <p>Finally, we shifted our focus to examining errors by visualizing the attention mechanisms of the model. This approach aimed to provide deeper insights into how the model processes and responds to various types of questions, particularly those categorized as Type 2 errors.</p> <h2 id="analysis-and-evaluations"><strong>Analysis and Evaluations</strong></h2> <h3 id="general-accuracy-of-flan-t5-on-social-iqa"><strong>General Accuracy of Flan-T5 on Social IQA</strong></h3> <p>Overall, Flan-T5 exhibits a high accuracy of 90% when presented with MCQs from Social IQA, which could be because it was fine-tuned “on a large set of varied instructions,” similar to the questions we present it <d-cite key="bosma_introducing_2021"></d-cite>. This accuracy is much higher than BERT, which had a 64.5% accuracy <d-cite key="sap_socialiqa_2019"></d-cite>.</p> <h3 id="set-of-formal-tags-derived-from-qualitative-coding"><strong>Set of Formal Tags Derived from Qualitative Coding</strong></h3> <p>In the initial annotation phase of qualitative coding, both coders were surprised to find many questions marked “incorrect” because of issues inherent in the Social IQA questions themselves (see below for an example). Therefore, we wanted to characterize why the Social IQA multiple choice questions were problematic: was it a lack of context comprehension, the unreasonableness of all answer options, or the presence of multiple equally reasonable answers?</p> <p>During the theme identification phase, the coders established two groups of tags:</p> <ol> <li> <p>Errors arising from the flawed construction of the Social IQA dataset</p> </li> <li> <p>Errors due to Flan-T5’s responses not aligning with social commonsense</p> </li> </ol> <h3 id="type-1-errors"><strong>Type 1 Errors</strong></h3> <p>For Type 1 errors, six labels were created:</p> <ol> <li> <p>Nonsensical Context: When the context sentence is incomprehensible to a reasonable human.</p> </li> <li> <p>Nonsensical or Ambiguous Question: When the question is either nonsensical or too ambiguous.</p> </li> <li> <p>Major Typo: Refers to incomprehensible parts of the Context, Question, or answer choices due to typos.</p> </li> <li> <p>Multiple Reasonable Answers: When several answers appear equally reasonable, either due to similar meanings or general reasonableness.</p> </li> <li> <p>No Reasonable Answer: When no answer options seem appropriate or reasonable.</p> </li> <li> <p>Incorrectly Labeled “Correct” Answer: When an alternative answer seems more reasonable than the one marked “correct.”</p> </li> </ol> <p><strong>Examples of Type 1 Errors</strong></p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/errors-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/errors-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/errors-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/errors.png" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Examples of Questions and Answers </div> <h3 id="type-2-errors"><strong>Type 2 Errors</strong></h3> <p>For Type 2 errors: we devise the following set of three labels:</p> <ol> <li> <p>Overinfers: This tag is for questions where Flan-T5 seems to make a large leap in logic, resulting in it picking an answer choice that makes spurious assumptions when a much more direct and clear answer is available</p> </li> <li> <p>Associated but Incorrect: This is for questions where Flan-T5 picks an answer choice that is associated with the context and question, but is not what the question is specifically asking about. This differs from over-inferring in that this usually entails picking irrelevant answer choices.</p> </li> <li> <p>Flan-T5 Incorrect (unspecified): all other mistakes attributable to Flan-T5.</p> </li> </ol> <h3 id="distribution-of-tags"><strong>Distribution of Tags</strong></h3> <p>Looking at our annotated questions, we see that 65% of errors stemmed from the flawed construction of the Social IQA dataset. Meanwhile, 38% of errors were errors stemming from Social IQA not picking the right answer. Observe that it is possible for a question to be tagged with both a Type 1 tag and a Type 2 tag.</p> <p>For Type 1 errors, we see that having multiple reasonable answers is by far the most common reason why a question is problematic. This was followed by having no reasonable answer, and the answer labeled “correct” not being the best available answer. Indeed, the top three reasons why a question is considered problematic all stem from questionable answer choices. This highlights how the construction of the answer choices, and thus Social IQA as a benchmark set, is problematic.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/socialiqaerrors-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/socialiqaerrors-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/socialiqaerrors-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/socialiqaerrors.jpeg" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Histogram of the Types of Errors in SocialIQA </div> <p>Next, we examine the distribution of Type 2 error tags. We see that the most common reason is Flan-T5 over-inferring.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/flant5errors-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/flant5errors-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/flant5errors-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/flant5errors.jpeg" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Histogram of the Types of Errors FlanT5 Makes </div> <h3 id="analysis-of-question-types"><strong>Analysis of Question Types</strong></h3> <p>In our quantitative analysis, we identified key features contributing to lower accuracy in certain questions. Notably, questions containing the word ‘others’ scored lower in accuracy, with an average of 0.880, compared to the general accuracy score of 0.990. Furthermore, questions featuring repeated answer choices also exhibited a lower accuracy score of 0.818.</p> <h3 id="attempt-to-prune-social-iqa"><strong>Attempt to Prune Social IQA</strong></h3> <p>Assessing models on social commonsense reasoning questions requires clear comprehension and consensus on the appropriateness of the questions and their answer choices. Our goal was to create a tool to classify the sensibility of these questions and answers. To achieve this, we experimented with various models, including Flan-T5 and GPT-4, asking them to evaluate the coherence of the questions. Unfortunately, the results were inconsistent, often varying with each regeneration of the response. Despite these challenges, we maintain that addressing this issue remains crucial.</p> <h3 id="visualization-of-attention-mechanism"><strong>Visualization of Attention Mechanism</strong></h3> <p>In our analysis of Type 2 errors, we focused on how the errors happen because Flan-T5 overinfers the underlying reasons not explicitly stated in the question instead of picking the more straightforward and correct answer, or picks some answer associated with the words in the context that isn’t directly related to the question.</p> <p>In addition to providing qualitative analysis, we set out to provide some quantitative analysis to better understand why this was happening. Consider these linked notebooks, which visualize the cross attention and the encoder attention for <a href="https://colab.research.google.com/drive/1M4XhFORT5KJgFaaVnZM3g5QS8JPV7Apq#scrollTo=JHkd_dwR2AiZ">one correctly labeled example</a> and <a href="https://colab.research.google.com/drive/1VtU2kvJA5EKL4AeuaW-N0RwiBimb96MB#scrollTo=JHkd_dwR2AiZ">one incorrectly labeled example</a>, where Flan-T5 chooses an associated but incorrect answer. (Note that the specific images were chosen for brightness in the heatmaps, since the attention was normalized. Please reference the notebook.).</p> <p>To visualize cross-attention, we looked at the cross-attention between the answer Flan-T5 generates and the encodings, across each layer and attention head in Flan-T5, grouping in both orders. To visualize the encoder attention, we looked at the average attention for each layer in the input encoding, and for the layer that saw the most drastic change (layer 2, starting from 0 index), we visualized the attention for each attention head.</p> <p>Now, consider the context and question:</p> <p>Cameron had a big paper due later in the week, so Cameron put pen to paper. What will Cameron want to do next?</p> <p>A) research his topic</p> <p>B) write an outline</p> <p>C) redo his topic</p> <p>Flan-T5 answers A), while the correct answer is “write an outline.” Notably, Flan-T5 doesn’t choose the third answer, “redo his topic.”</p> <p>Therefore, we can see that Flan-T5’s is associated with the topic, but isn’t the correct answer, which is given by the phrase “put pen to paper.” Visualizing the average encoder attention and cross attention, we see that the contextualized embeddings and generation primarily focus on the words “big paper” and the question, but don’t pay much attention to the word “pen.”</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated.png" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Cross Attention for Associated But Incorrect Answer </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated_encoder-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated_encoder-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated_encoder-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/associated_encoder.png" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Encoder Attention for Associated But Incorrect Answer </div> <p>Generalizing our results a bit, we find that FLAN only pays reasonable attention (normalized attention &gt; 0.05) to the keywords for 14 out of 26 examples tagged under “associated,” even for simpler questions such as</p> <p>On the other hand, consider the question,</p> <p>Sydney played basketball with her friends after school on a sunny afternoon. What does Sydney need to do before this?</p> <p>A) take a nap before this</p> <p>B) have a basketball before this</p> <p>C) go home before this</p> <p>Flan-T5 correctly answers “have a basketball before this,” not choosing “take a nap before this” or “go home before this.”</p> <p>Indeed, we see the four vertical lines in the encoder and cross attentions that correspond to key phrases in the sentence. For the questions that Flan-T5 gets correct, it pays attention to the right keywords 9 out of 10 times. Lastly, note that for questions labeled “overinfer,” Flan-T5 pays attention to the right keywords 8 out of 10 times.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct.png" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Cross Attention for Correct Answer </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct_encoder-480.webp"/> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct_encoder-800.webp"/> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct_encoder-1400.webp"/> <img src="/staging/assets/img/2023-11-11-unraveling-social-reasoning-in-llms/correct_encoder.png" class="img-fluid" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"/> </picture> </figure> </div> </div> <div class="caption"> Encoder Attention for Correct Answer </div> <p>Therefore, for more straightforward questions, namely, questions that have one straightforward answer, Flan-T5 can find the right keywords that lead it to the answer (i.e. the correct questions). On the other hand, for more challenging questions that require paying attention to specific keywords and reasoning from the perspective of a character (recall the Sally-Anne Test), Flan-T5 struggles more, with more variance between what it pays attention to and doesn’t (e.g. paper but not pen).</p> <p>In addition, since Flan-T5 pays attention to the right keywords most of the time for the questions it overinfers on, this suggests that there’s some aspect of reasoning that’s not being captured via our attention visualizations, and that this reasoning isn’t performing that well.</p> <p>Notably, something interesting to note is that for all of the examples, by the third encoder layer, on average, Flan-T5 doesn’t change its encodings, and for the cross attention, the attention remains consistent across all layers and (most) attention heads. Therefore, it seems like most of the “reasoning” is being performed in the encoding stage.</p> <p>Therefore, some of our next steps are understanding how removing attention heads in a smaller affects the model’s ability to reason, given the large number of heads and layers (24 x 32) in Flan-T5-xxl . We visualized each encoder head for one layer, but this doesn’t immediately lend itself to an intuitive interpretation.</p> <h2 id="discussion"><strong>Discussion</strong></h2> <p>Our work concentrated on analyzing two categories of errors and proposing solutions to address them. The two error types are:</p> <ol> <li> <p>Errors originating from the flawed construction of the Social IQA dataset.</p> </li> <li> <p>Errors where Flan-T5’s responses do not align with social commonsense.</p> </li> </ol> <h3 id="problems-with-social-iqa-1"><strong>Problems with Social IQA</strong></h3> <p>Our analysis of Type 1 errors in the Social IQA dataset revealed significant issues. In examining n=350 incorrectly answered questions, we found that 65% had problems with their context, question, or answer choices. Additionally, 54.4% of these errors had multiple reasonable answers, 23.7% lacked any reasonable answer, and 14.0% seemed to have mislabeled correct answers. This indicates a substantial number of misleading answer choices in the Social IQA questions.</p> <p>This issue partly stems from the dataset’s construction, which involved assigning crowdsourced workers tasks of writing positive answers for each question and sourcing negative answers from “different but related” questions. This approach likely contributed to the high error rate.</p> <p>Since Social IQA is so frequently used in evaluating model performances and transfer learning tasks, the challenge is to identify and remove these flawed questions. Although our attempt to do this was unsuccessful due to time and budget constraints, we believe it is feasible. Many evaluations of large language models (LLMs) use crowdsourced multiple-choice questions, so a pruning tool to ensure benchmark reliability would be highly beneficial beyond the task of social commonsense reasoning.</p> <p>Pruning the Social IQA dataset to eliminate most erroneous questions would also provide an opportunity to reassess older models.</p> <p>Overall, our analysis of Type 1 errors underscores the need for caution in crowdsourcing benchmark questions. While crowdsourcing likely still remains the best solution for creating large benchmark sets, a pruning tool is essential to maintain the reliability of such datasets.</p> <p>On the other hand, our analysis of Type 2 errors suggests that LLMs still might not match the social reasoning skills of humans for more complex scenarios. For simpler questions, they can often find a single keyword that informs their answer, while for more complex questions, they often miss important phrases and can’t necessarily think from another person’s perspective. For instance, recall how questions containing the keyword “other” result in Flan-T5 having considerably lower accuracy.</p> <h2 id="main-limitations"><strong>Main Limitations</strong></h2> <p>The primary limitations of our study are rooted in its scope and methodology. Firstly, we focused exclusively on a single model, Flan-T5, which may limit the generalizability of our findings. Additionally, our analysis was based on a relatively small sample size of n=350, and it involved only two coders. For a more robust and comprehensive evaluation, increasing the number of coders would be beneficial, particularly to assess intercoder reliability. Furthermore, implementing measures to mitigate recognition bias during the tagging process would enhance the validity of our results.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> </div> <d-bibliography src="/staging/assets/bibliography/2023-11-11-unraveling-social-reasoning-in-llms.bib"></d-bibliography> <script src="https://utteranc.es/client.js" repo="iclr-blogposts/2023" issue-term="pathname" theme="github-light" crossorigin="anonymous" async> </script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> </body> </html>